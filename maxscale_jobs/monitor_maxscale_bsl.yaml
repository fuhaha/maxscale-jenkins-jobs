- job:
    name: build_and_test_by_maxscale_bsl_push
    description: 'This job run build_and_test by commits to maxscale_bsl '
    triggers:
      - github
    scm:
      - git:
          # TODO replace repo url
          url: !include: './maxscale_jobs/include/maxscale_repo.yaml'
          branches:
            - develop
    builders:
      - trigger-builds:
          # TODO replace report_sql with build_and_test
          - project: 'build_and_test'
            predefined-parameters: |
              # TODO replace key=value below to needed params
              source=BRANCH
              value=develop
              box=centos_7_libvirt
              remove_strip=yes
              test_set=-LE HEAVY
              smoke=yes
              name=pushtest-$BUILD_ID
              target=pushtest-$BUILD_ID 
    publishers:
      !include: './maxscale_jobs/include/mail.yaml'
