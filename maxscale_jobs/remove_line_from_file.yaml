- job:
    name: remove_line_from_file
    description: 'This job remove a first line with branch from given file.'
    parameters:
      - string:
          name: branch
      - choice:
          name: file
          choices:
            - $HOME/run_test_branches.list
            - $HOME/on_push_maxscale_branches.list
      - string:
          name: repo
          default: "https://github.com/mariadb-corporation/MaxScale.git"
    builders:
      - shell: |
          LINE_NUMBER=$(grep -n --max-count=1 "$branch" $file | cut -f1 -d:)
          if [[ $LINE_NUMBER ]]; then
            echo "$branch exist"
            $(sed -i $LINE_NUMBER"d" $file)
            echo "$branch remove success"
          else
            echo "$branch not exist!"
            exit 1
          fi

